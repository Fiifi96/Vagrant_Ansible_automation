---
- name: Confuring Web server 1
  hosts: app
  become: true

  tasks:
    - name: Update apt-get repo and cache
        apt: 
          update_cache: yes 
          force_apt_get: yes 
          cache_valid_time: 3600

    - name: Allow everything and enable UFW
        community.general.ufw:
          state: enabled
          policy: allow 

    - name: Allow SSH in UFW        
        community.general.ufw:
          rule: limit
          port: ssh
          proto: tcp

    - name: Allow OPENSSH in UFW       
        community.general.ufw:
          rule: allow
          name: OpenSSH  

    - name: Allow all access to tcp port 80
        community.general.ufw:
          rule: allow
          port: '80'
          proto: tcp  